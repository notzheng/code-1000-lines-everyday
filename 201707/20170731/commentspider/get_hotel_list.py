import requests

cookies = {
    'traceExt': 'campaign=CHNgoogle323&adid=index',
    'adscityen': 'Wuhan',
    'Customer': 'HAL=ctrip_gb',
    'ASP.NET_SessionId': 'i4ripljf1dv1zmq4dpanbznk',
    'GUID': '09031011311148741758',
    'HotelDomesticVisitedHotels1': '433114=0,0,4.6,8304,/hotel/19000/18895/7470681c09b643f984c65cb13a930b0d.jpg,&2298345=0,0,4.2,811,/hotel/20000/19249/b1b5083c039f4059a1fa7012b430f6a6.jpg,&479844=0,0,4.4,2877,/t1/hotel/7000/6179/0dcc646bb8d2463ea2e2b5524501d790.jpg,&1008154=0,0,4.4,1418,/hotel/99000/98028/6afc0888f623437d93c0ba9826fe5805.jpg,&436525=0,0,4.3,1636,/fd/hotel/g3/M09/9D/7E/CggYGVaga5uAYt2wAA9VI-xD900511.jpg,',
    'appFloatCnt': '37',
    'manualclose': '1',
    '__utmdctrp': '1',
    'Union': 'OUID=&AllianceID=4899&SID=963770&SourceID=&Expires=1500707871948',
    'StartCity_Pkg': 'PkgStartCity=477',
    '_abtest_userid': 'ba92b19b-fffd-4a3b-be4e-1956bf6cba55',
    'Session': 'SmartLinkCode=ctrip&SmartLinkKeyWord=&SmartLinkQuary=_UTF.&SmartLinkHost=ctrip.com&SmartLinkLanguage=zh',
    'HotelCityID': '1split%E5%8C%97%E4%BA%ACsplitBeijingsplit2017-7-15split2017-07-16split0',
    'page_time': '1500095831420%2C1500095870448%2C1500095875442%2C1500095878997%2C1500095882937%2C1500095909411%2C1500098273620%2C1500098294956%2C1500098302758%2C1500098313336%2C1500098321188%2C1500098329611%2C1500098341784%2C1500098347320%2C1500098353833%2C1500103065964%2C1500103069830%2C1500103079638%2C1500103203803%2C1500103210862%2C1500103231068%2C1500103254780%2C1500103306664%2C1500103536492%2C1500103542001',
    '_RF1': '58.48.110.172',
    '_RSG': 'bOaKopp2B.FZhSdMe0b_cB',
    '_RGUID': 'ff8b0b3c-f252-4625-b9bf-940a169dcae3',
    '_ga': 'GA1.2.482266834.1500103072',
    '_gid': 'GA1.2.1080301273.1500103072',
    '__zpspc': '9.1.1500103071.1500103543.8%234%7C%7C%7C%7C%7C%23',
    '_jzqco': '%7C%7C%7C%7C1500103072190%7C1.639132641.1500103071982.1500103538536.1500103543545.1500103538536.1500103543545.undefined.0.0.9.9',
    'MKT_Pagesource': 'PC',
    '_bfa': '1.1500103068991.3ib2wk.1.1500103068991.1500103306054.16.76.212093',
    '_bfs': '1.18',
    '_bfi': 'p1%3D102002%26p2%3D102002%26v1%3D76%26v2%3D75',
}

headers = {
    'Origin': 'http://hotels.ctrip.com',
    'Accept-Encoding': 'gzip, deflate',
    'Accept-Language': 'en-US,en;q=0.8',
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36',
    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',
    'Accept': '*/*',
    'Cache-Control': 'max-age=0',
    'Referer': 'http://hotels.ctrip.com/hotel/beijing1',
    'Connection': 'keep-alive',
    'If-Modified-Since': 'Thu, 01 Jan 1970 00:00:00 GMT',
}

data = [
    ('__VIEWSTATEGENERATOR', 'DB1FBB6D'),
    ('cityName', '北京'),
    ('StartTime', '2017-07-15'),
    ('DepTime', '2017-07-16'),
    ('txtkeyword', ''),
    ('Resource', ''),
    ('Room', ''),
    ('Paymentterm', ''),
    ('BRev', ''),
    ('Minstate', ''),
    ('PromoteType', ''),
    ('PromoteDate', ''),
    ('operationtype', 'NEWHOTELORDER'),
    ('PromoteStartDate', ''),
    ('PromoteEndDate', ''),
    ('OrderID', ''),
    ('RoomNum', ''),
    ('IsOnlyAirHotel', 'F'),
    ('cityId', '1'),
    ('cityPY', 'beijing'),
    ('cityCode', '010'),
    ('cityLat', '39.910532922919'),
    ('cityLng', '116.41378402103'),
    ('positionArea', ''),
    ('positionId', ''),
    ('keyword', ''),
    ('hotelId', ''),
    ('htlPageView', '0'),
    ('hotelType', 'F'),
    ('hasPKGHotel', 'F'),
    ('requestTravelMoney', 'F'),
    ('isusergiftcard', 'F'),
    ('useFG', 'F'),
    ('HotelEquipment', ''),
    ('priceRange', '-2'),
    ('hotelBrandId', ''),
    ('promotion', 'F'),
    ('prepay', 'F'),
    ('IsCanReserve', 'F'),
    ('OrderBy', '99'),
    ('OrderType', ''),
    ('k1', ''),
    ('k2', ''),
    ('CorpPayType', ''),
    ('viewType', ''),
    ('checkIn', '2017-07-15'),
    ('checkOut', '2017-07-16'),
    ('DealSale', ''),
    ('ulogin', ''),
    ('hidTestLat', '0%7C0'),
    ('AllHotelIds',
     '608345%2C433114%2C691682%2C452197%2C1390223%2C2277604%2C2226967%2C1725911%2C4035013%2C6508621%2C482534%2C4536895%2C426748%2C444199%2C481108%2C1249518%2C436916%2C452251%2C1722447%2C939388%2C431623%2C1816847%2C5389632%2C1836273%2C479844'),
    ('psid', ''),
    ('HideIsNoneLogin', 'T'),
    ('isfromlist', 'T'),
    ('ubt_price_key', 'htl_search_result_promotion'),
    ('showwindow', ''),
    ('defaultcoupon', ''),
    ('isHuaZhu', 'False'),
    ('hotelPriceLow', ''),
    ('htlFrom', 'hotellist'),
    ('unBookHotelTraceCode', ''),
    ('showTipFlg', ''),
    ('hotelIds',
     '608345_1_1,433114_2_1,691682_3_1,452197_4_1,1390223_5_1,2277604_6_1,2226967_7_1,1725911_8_1,4035013_9_1,6508621_10_1,482534_11_1,4536895_12_1,426748_13_1,444199_14_1,481108_15_1,1249518_16_1,436916_17_1,452251_18_1,1722447_19_1,939388_20_1,431623_21_1,1816847_22_1,5389632_23_1,1836273_24_1,479844_25_1'),
    ('markType', '0'),
    # ('zone', ''),
    # ('location', ''),
    # ('type', ''),
    # ('brand', ''),
    # ('group', ''),
    # ('feature', ''),
    # ('equip', ''),
    # ('star', ''),
    # ('sl', ''),
    # ('s', ''),
    # ('l', ''),
    # ('price', ''),
    # ('a', '0'),
    # ('keywordLat', ''),
    # ('keywordLon', ''),
    # ('contrast', '0'),
    # ('contyped', '0'),
    # ('productcode', ''),
    ('page', '250'),
]

r = requests.post('http://hotels.ctrip.com/Domestic/Tool/AjaxHotelList.aspx', headers=headers, cookies=cookies,
                  data=data)
print(r.status_code)
print(r.json())
